/*
 * svg-interactive
 * Version: 0.1.0 - 2014-07-11
 * License: MIT
 */
angular.module("svg-interactive",["svg-interactive.zoomable","svg-interactive.pannable","svg-interactive.utilities"]),angular.module("svg-interactive.pannable",["svg-interactive.utilities"]).directive("pannable",["utilities",function(a){return{restrict:"A",link:function(b,c,d){function e(b){var e=d.viewbox.split(" ").map(function(a){return parseInt(a,10)}),f=a.translateCoordinatesScreenToSVG(c,b.clientX,b.clientY);e[0]-=f.x-h.x,e[1]-=f.y-h.y,d.$set("viewbox",e.join(" ")),b.stopPropagation(),b.preventDefault()}function f(b){h=a.translateCoordinatesScreenToSVG(c,b.clientX,b.clientY),i=""===c.css("cursor")?"auto":c.css("cursor"),c.css("cursor","move"),c.on("mousemove",e),c.on("mouseup",g),b.stopPropagation(),b.preventDefault()}function g(){c.css("cursor",i),c.off("mousemove",e),c.off("mouseup",g)}var h,i;c.on("mousedown",f)}}}]),angular.module("svg-interactive.utilities",[]).factory("utilities",[function(){return{translateCoordinatesScreenToSVG:function(a,b,c){var d=element[0].createSVGPoint();return d.x=b,d.y=c,d.matrixTransform(element[0].getScreenCTM().inverse())}}}]),angular.module("svg-interactive.zoomable",["svg-interactive.utilities"]).directive("zoomable",["utilities",function(a){return{restrict:"A",link:function(b,c,d){var e=1.1,f=!0;d.$observe("zoomRate",function(a){angular.isDefined(a)&&(e=parseFloat(a))}),d.$observe("zoomable",function(a){angular.isDefined(a)&&(f="false"===a?!1:!0)}),c.on("mousewheel",function(b){if(f){var g,h=d.viewbox.split(" ").map(function(a){return parseInt(a,10)}),i=c[0].createSVGPoint();return i=a.translateCoordinatesScreenToSVG(c,b.clientX,b.clientY),b.wheelDelta<0?(h[2]*=e,h[3]*=e):b.wheelDelta>0&&(h[2]/=e,h[3]/=e),d.$set("viewbox",h.join(" ")),g=a.translateCoordinatesScreenToSVG(c,b.clientX,b.clientY),h[0]+=parseInt(i.x-g.x,10),h[1]+=parseInt(i.y-g.y,10),d.$set("viewbox",h.join(" ")),!1}})}}}]);